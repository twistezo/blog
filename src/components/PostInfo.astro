---
import { dateString } from '~/utils'
import { render, type CollectionEntry } from 'astro:content'
import siteConfig from '~/site.config'

interface Props {
  post: CollectionEntry<'posts'>
  class?: string
}

const { post, class: className } = Astro.props
const { remarkPluginFrontmatter } = await render(post)
const { minutesRead } = remarkPluginFrontmatter
---

<div class:list={[className, 'text-foreground/80']}>
  <div class='flex flex-col gap-4 sm:gap-2 sm:flex-wrap items-start sm:items-center sm:flex-row'>
    <div class='shrink-0 pl-0.5 text-[17px] sm:text-base'>
      <time>{dateString(post.data.published)}</time>
      {
        siteConfig.author && (
          <span class="before:content-['·'] before:font-bold before:inline-block before:mx-0.5">
            {siteConfig.author}
          </span>
        )
      }
      {
        minutesRead && (
          <span class="before:content-['·'] before:inline-block before:mx-0.5">{minutesRead}</span>
        )
      }
    </div>
  </div>
</div>
